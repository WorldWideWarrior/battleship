@import "~bootstrap/scss/functions";
@import "config/variables";
@import "~bootstrap/scss/bootstrap";
@import "config/mixins";
@import "helper/fonts";
@import "helper/form";
@import "helper/anim";
@import "helper/global";
@import "helper/tabs";

$font_dir: '/static/fonts/';

@mixin register-font($name, $path)
{
	@font-face {
		font-family: $name;
		src: url($font_dir + $path);
	}
}

//http://www.antimath.info/css/sass-sqrt-function/
@function sqrt($r) {
	$x0: 1;
	$x1: $x0;

	@for $i from 1 through 10 {
		$x1: $x0 - ($x0 * $x0 - abs($r)) / (2 * $x0);
		$x0: $x1;
	}

	@return $x1;
}

$customFont: Raleway;

@include register-font($customFont, 'Raleway/Raleway-Medium.ttf');

body {
	font-family: $customFont;
}

$margin-border: 8px;

#players {
	padding: $margin-border;
	@media screen and (orientation:portrait) {
		border-bottom: 0;
	}

	#player1Name {
		float: left;
		width: auto;
	}

	#player2Name {
		float: right;
		width: auto;
	}

	button {
		float: none;
		width: 100%;
	}
}

$see-background: #62e3f5;
$see-background-color: #44c2f5;
$hit-background: #0F0;
$miss-background: #F00;
$transition-time: 400ms;

@mixin box($size, $borderSize) {
	.box {
		width: $size;
		height: $size;

		border: white $borderSize solid;

		background-color: $see-background;
		touch-action: manipulation;
		&.sea:hover {
			background-color: $see-background-color;
		}
		transition: background-color $transition-time, border-width $transition-time 600ms;
		&.ship-start-right,
		&.ship-middle-right,
		&.ship-end-right,
		&.ship-start-down,
		&.ship-middle-down,
		&.ship-end-down {
			background-color: #000;
			&.hit {
				animation: 400ms hit, 400ms ship-destroyed 1200ms;
			}
		}

		&.ship-start-right {
			border-right-width: 0;
		}
		&.ship-middle-right {
			border-right-width: 0;
			border-left-width: 0;
		}
		&.ship-end-right {
			border-left-width: 0;
		}
		&.ship-start-down {
			border-bottom-width: 0;
		}
		&.ship-middle-down {
			border-top-width: 0;
			border-bottom-width: 0;
		}
		&.ship-end-down{
			border-top-width: 0;
		}
		&.hit {
			background-color: $hit-background;
			animation: 600ms hit;
		}
		&.miss {
			background-color: #2085e4;
			animation: 600ms miss;
		}
	}
}

.fields {
	display: flex;
	align-items: center;
	justify-content: space-around;
	@media screen and (orientation:portrait) {
		flex-direction: column;
	}
	@media screen and (orientation:landscape) {
		flex-direction: row;
	}
	margin-bottom: $margin-border;
}

.field {
	display: flex;
	flex-direction: column;
	margin: $margin-border;

	transition: opacity $transition-time;

	background-color: transparent;

	@media screen and (orientation:portrait) {
		@include box(4.1vh, 0.5vh);
	}

	@media screen and (orientation:landscape) {
		@include box(4.1vw, 0.5vw);
	}

	.line {
		display: flex;
		margin: 0;
	}


	&.activated-field {
		@for $x from 0 through 9 {
			@for $y from 0 through 9 {
				.line:nth-child(#{$x + 1}) {
					.box {
						&.sea {
							&:nth-child(#{$y + 1}) {
								$animation-delay: sqrt($x*$x+$y*$y) * 100ms;
								animation: 3000ms turn-activate $animation-delay linear;
								animation-iteration-count: infinite;
							}
						}
					}

				}
			}
		}
	}

	&#field-opponent.deactivated-field {
		opacity: 0.4;
		transition: opacity $transition-time $transition-time;

		.box{
			&.sea:hover {
				background-color: $see-background;
			}

		}
	}
}


@media screen and (orientation:portrait) {
	@keyframes turn-activate {
		0%, 70%, 100% {
			//transform: translate(0rem, 0rem);
		}
		10% {
			background-color: $see-background-color;
			//transform: translate(0.20rem, 0.20rem);
		}
	}
}

@media screen and (orientation:landscape) {
	@keyframes turn-activate {
		0%, 70%, 100% {
			//transform: translate(0rem, 0rem);
		}
		10% {
			background-color: $see-background-color;
			//transform: translate(0.3rem, 0.3rem);
		}
	}
}
@media screen and (orientation:portrait) {
	@keyframes ship-destroyed {
		0%, 100% {

		}
		50% {
			transform: scale(1.1);
		}
	}
}
@media screen and (orientation:landscape) {
	@keyframes ship-destroyed {
		0%, 100% {

		}
		50% {
			transform: scale(1.1);
		}
	}
}

@media screen and (orientation:portrait) {
	@keyframes miss {
		0%, 100% {

		}
		50% {
			border-width: 0.8vw;
			background-color: $miss-background;
		}
	}
}
@media screen and (orientation:landscape) {
	@keyframes miss {
		0%, 100% {

		}
		50% {
			border-width: 0.8vw;
			background-color: $miss-background;
		}
	}
}


@media screen and (orientation:portrait) {
	@keyframes hit {
		0%, 100% {

		}
		50% {
			border-width: 0.3vw;
		}
	}
}
@media screen and (orientation:landscape) {
	@keyframes hit {
		0%, 100% {

		}
		50% {
			border-width: 0.3vh;
		}
	}
}

